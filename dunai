mixed-port: 7897
allow-lan: true
mode: rule
log-level: info
unified-delay: true
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

dns:
  enable: true
  listen: "127.0.0.1:5335"
  use-system-hosts: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver: [180.76.76.76, 182.254.118.118, 8.8.8.8, 180.184.2.2]
  nameserver: [180.76.76.76, 119.29.29.29, 180.184.1.1, 223.5.5.5, 8.8.8.8, "https://223.6.6.6/dns-query#h3=true", "https://dns.alidns.com/dns-query", "https://cloudflare-dns.com/dns-query", "https://doh.pub/dns-query"]
  fallback: ["https://000000.dns.nextdns.io/dns-query#h3=true", "https://dns.alidns.com/dns-query", "https://doh.pub/dns-query", "https://public.dns.iij.jp/dns-query", "https://101.101.101.101/dns-query", "https://208.67.220.220/dns-query", "tls://8.8.4.4", "tls://1.0.0.1:853", "https://cloudflare-dns.com/dns-query", "https://dns.google/dns-query"]
  fallback-filter: {geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32, 127.0.0.1/32], domain: [+.google.com, +.facebook.com, +.twitter.com, +.youtube.com, +.xn--ngstr-lra8j.com, +.google.cn, +.googleapis.cn, +.googleapis.com, +.gvt1.com]}
  fake-ip-filter: ["*.lan", "stun.*.*.*", "stun.*.*", time.windows.com, time.nist.gov, time.apple.com, time.asia.apple.com, "*.ntp.org.cn", "*.openwrt.pool.ntp.org", time1.cloud.tencent.com, time.ustc.edu.cn, pool.ntp.org, ntp.ubuntu.com, ntp.aliyun.com, ntp1.aliyun.com, ntp2.aliyun.com, ntp3.aliyun.com, ntp4.aliyun.com, ntp5.aliyun.com, ntp6.aliyun.com, ntp7.aliyun.com, time1.aliyun.com, time2.aliyun.com, time3.aliyun.com, time4.aliyun.com, time5.aliyun.com, time6.aliyun.com, time7.aliyun.com, "*.time.edu.cn", time1.apple.com, time2.apple.com, time3.apple.com, time4.apple.com, time5.apple.com, time6.apple.com, time7.apple.com, time1.google.com, time2.google.com, time3.google.com, time4.google.com, music.163.com, "*.music.163.com", "*.126.net", musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, "*.kuwo.cn", api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, "*.y.qq.com", streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, "*.xiami.com", "*.music.migu.cn", music.migu.cn, "*.msftconnecttest.com", "*.msftncsi.com", localhost.ptlogin2.qq.com, "*.*.*.srv.nintendo.net", "*.*.stun.playstation.net", "xbox.*.*.microsoft.com", "*.ipv6.microsoft.com", "*.*.xboxlive.com", speedtest.cros.wr.pvp.net]

# =========================
# 配置文件管理
# =========================
profile:
  store-selected: true
  store-fake-ip: false

# =========================
# 域名/流量嗅探
# =========================
sniffer:
  enable: true
  parse-pure-ip: true
  sniff:
    TLS: {ports: [443, 8443]}
    HTTP: {ports: [80, 8080-8880], override-destination: true}

# =========================
# Geo 数据获取
# =========================
geodata-mode: true
geo-auto-update: true
geodata-loader: standard
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb


proxy-groups:
  - {name:  节点选择, include-all: true, type: select, proxies: [ 自动选择, DIRECT], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png }
  - {name:  自动选择, include-all: true, type: url-test, url: https://www.gstatic.com/generate_204, interval: 150, tolerance: 50, icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Auto.png}
  - {name:  电报新加坡, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png}
  - {name:  电报美国, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png}
  - {name:  电报荷兰, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png}
  - {name:  nodeseek, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://cdn.jsdelivr.net/gh/Vbaethon/HOMOMIX@main/Icon/Color/Panda.png}
  - {name:  人工智能, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png}
  - {name:  国外媒体, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png}
  - {name:  巴哈姆特, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Bahamut.png}
  - {name:  油管视频, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png}
  - {name:  emby, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/walkxcode/dashboard-icons/png/emby.png}    
  - {name:  谷歌服务, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Google.png}
  - {name:  微软服务, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Microsoft.png}
  - {name:  苹果服务, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Apple.png}
  - {name:  漏网之鱼, include-all: true, type: select, proxies: [ 节点选择, DIRECT,  自动选择], icon: https://quantil.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Final.png}

rule-providers:
  jsproxy: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/qklg/pic@master/ruleset/jsproxy.yaml", interval: 86400, path: ./ACL4SSR/jsproxy.yaml}
  LocalAreaNetwork: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/LocalAreaNetwork.yaml", interval: 86400, path: ./ACL4SSR/LocalAreaNetwork.yaml}
  UnBan: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/UnBan.yaml", interval: 86400, path: ./ACL4SSR/UnBan.yaml}
  ChinaIp: {behavior: ipcidr, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaIp.yaml", interval: 86400, path: ./ACL4SSR/ChinaIp.yaml}  
  ChinaDomain: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaDomain.yaml", interval: 86400, path: ./ACL4SSR/ChinaDomain.yaml}
  ChinaCompanyIp: {behavior: ipcidr, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaCompanyIp.yaml", interval: 86400, path: ./ACL4SSR/ChinaCompanyIp.yaml}
  SteamRegionCheck: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/qklg/pic@master/ruleset/SteamRegionCheck.yaml", interval: 86400, path: ./ACL4SSR/SteamRegionCheck.yaml}
  Hetzner: {behavior: domain, type: http, url: "https://quantil.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/hetzner.yaml", interval: 86400, path: ./ACL4SSR/Hetzner.yaml}
  Google: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Google.yaml", interval: 86400, path: ./ACL4SSR/Google.yaml}
  GoogleCN: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/GoogleCN.yaml", interval: 86400, path: ./ACL4SSR/GoogleCN.yaml}
  GoogleFCM: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/GoogleFCM.yaml", interval: 86400, path: ./ACL4SSR/GoogleFCM.yaml}  
  YouTube: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/YouTube.yaml", interval: 86400, path: ./ACL4SSR/YouTube.yaml}    
  ProxyLite: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ProxyLite.yaml", interval: 86400, path: ./ACL4SSR/ProxyLite.yaml}
  Telegram: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Telegram.yaml", interval: 86400, path: ./ACL4SSR/Telegram.yaml}
  AI: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/AI.yaml", interval: 86400, path: ./ACL4SSR/AI.yaml}
  Bahamut: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Bahamut.yaml", interval: 86400, path: ./ACL4SSR/Bahamut.yaml}
  Microsoft: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Microsoft.yaml", interval: 86400, path: ./ACL4SSR/Microsoft.yaml}
  OneDrive: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/OneDrive.yaml", interval: 86400, path: ./ACL4SSR/OneDrive.yaml}
  Apple: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/Ruleset/Apple.yaml", interval: 86400, path: ./ACL4SSR/Apple.yaml}
  BanAD: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/BanAD.yaml", interval: 86400, path: ./ACL4SSR/BanAD.yaml}
  BanProgramAD: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/BanProgramAD.yaml", interval: 86400, path: ./ACL4SSR/BanProgramAD.yaml}
  BanEasyList: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/BanEasyList.yaml", interval: 86400, path: ./ACL4SSR/BanEasyList.yaml}
  ProxyMedia: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ProxyMedia.yaml", interval: 86400, path: ./ACL4SSR/ProxyMedia.yaml}
  TelegramSG: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/qklg/pic@master/ruleset/TelegramSG.yaml", interval: 86400, path: ./ACL4SSR/TelegramSG.yaml}
  TelegramUS: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/qklg/pic@master/ruleset/TelegramUS.yaml", interval: 86400, path: ./ACL4SSR/TelegramUS.yaml}
  TelegramNL: {behavior: classical, type: http, url: "https://quantil.jsdelivr.net/gh/qklg/pic@master/ruleset/TelegramNL.yaml", interval: 86400, path: ./ACL4SSR/TelegramNL.yaml}

rules:
  - DOMAIN-SUFFIX,nodeseek.com, nodeseek
  - PROCESS-NAME,com.mountains.hills, emby
  - PROCESS-NAME,com.hush.yamby, emby
  - RULE-SET,jsproxy, 节点选择 
  - RULE-SET,OneDrive, 节点选择
  - RULE-SET,TelegramSG, 电报新加坡
  - RULE-SET,TelegramUS, 电报美国
  - RULE-SET,TelegramNL, 电报荷兰
  - RULE-SET,Microsoft, 微软服务
  - RULE-SET,Apple, 苹果服务
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,UnBan,DIRECT
  - RULE-SET,ChinaIp,DIRECT  
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,ChinaCompanyIp,DIRECT
  - RULE-SET,SteamRegionCheck,DIRECT
  - RULE-SET,Hetzner,DIRECT
  - RULE-SET,YouTube, 油管视频
  - RULE-SET,Google, 谷歌服务 
  - RULE-SET,GoogleCN, 谷歌服务
  - RULE-SET,GoogleFCM, 谷歌服务
  - RULE-SET,AI, 人工智能
  - DOMAIN-SUFFIX,imgur.com, 人工智能
  - RULE-SET,Bahamut, 巴哈姆特  
  - RULE-SET,ProxyMedia, 国外媒体
  - RULE-SET,ProxyLite, 节点选择
  - RULE-SET,BanAD,REJECT
  - RULE-SET,BanProgramAD,REJECT
  - RULE-SET,BanEasyList,REJECT
  - MATCH, 漏网之鱼
